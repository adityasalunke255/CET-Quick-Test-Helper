:root{
  --bg:#070b19;--bg-soft:#0b1220;--surface:#0e162b;--muted:#8091a7;
  --primary:#f59e0b;--primary-600:#d97706;--accent:#7c3aed;--teal:#06b6d4;--danger:#ef4444;
  --text:#e6edf6;--text-soft:#aab6c6;--ring:#14b8a6;--shadow:0 12px 40px rgba(2,8,23,0.35);
  --neon:#22d3ee;--neon-2:#a78bfa;--glass:rgba(255,255,255,0.06);--stroke:rgba(255,255,255,0.12);
}
*{box-sizing:border-box}
@keyframes gradientShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
@keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}
html,body{margin:0;padding:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,'Noto Sans',sans-serif;
  background:
    radial-gradient(1200px 600px at 80% -10%, rgba(167,139,250,0.18), transparent 60%),
    radial-gradient(900px 500px at -10% 0%, rgba(34,211,238,0.14), transparent 60%),
    linear-gradient(120deg,#0b0f1f,#0d1326,#0a1122);
  background-size:200% 200%;animation:gradientShift 22s ease infinite;color:var(--text)}
.container{max-width:1100px;margin:0 auto;padding:16px}
.app-header{display:flex;align-items:center;gap:12px;padding:12px 16px;position:sticky;top:0;z-index:20;
  background:linear-gradient(90deg, rgba(34,211,238,0.08), rgba(124,58,237,0.08)); backdrop-filter:saturate(1.2) blur(10px);
  border-bottom:1px solid var(--stroke); box-shadow:0 10px 30px rgba(0,0,0,0.2)}
.app-footer{border-top:1px solid var(--stroke);background:transparent;color:var(--text-soft)}
.app-header nav{margin-left:auto;display:flex;gap:6px}
.app-header a{position:relative;color:var(--text);text-decoration:none;padding:8px 12px;border-radius:10px;transition:all .15s ease}
.app-header a::after{content:"";position:absolute;left:12px;right:12px;bottom:4px;height:2px;background:linear-gradient(90deg,var(--neon),var(--neon-2));border-radius:2px;transform:scaleX(0);transform-origin:left;transition:transform .18s ease;filter:drop-shadow(0 0 6px rgba(34,211,238,0.6))}
.app-header a:hover{background:rgba(255,255,255,0.08);transform:translateY(-1px);color:#fff}
.app-header a:hover::after{transform:scaleX(1)}
.app-header a.active{background:#f59e0b1a;color:#b45309;border:1px solid #f59e0b33}
.logo{width:30px;height:30px;filter:drop-shadow(0 2px 4px rgba(2,8,23,0.15))}
.hero{padding:28px 22px;background:linear-gradient(135deg,#fffbeb,#f5f3ff);position:relative;overflow:hidden}
.hero .title{margin:0 0 8px 0;font-size:28px;letter-spacing:-0.02em}
.hero .subtitle{margin:0 0 10px 0;color:#475569}
.hero::before,.hero::after{content:"";position:absolute;border-radius:50%;filter:blur(40px);opacity:.35}
.hero::before{width:200px;height:200px;background:#fde68a;left:-40px;top:-40px}
.hero::after{width:220px;height:220px;background:#ddd6fe;right:-60px;bottom:-60px}
.card{position:relative;background:var(--glass);border:1px solid var(--stroke);border-radius:16px;padding:16px;box-shadow:0 10px 30px rgba(2,8,23,0.35);transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease}
.card:hover{transform:translateY(-2px);box-shadow:0 20px 40px rgba(2,8,23,0.5);border-color:rgba(34,211,238,0.25)}
.card::before{content:"";position:absolute;inset:-1px;border-radius:inherit;padding:1px;background:linear-gradient(135deg,rgba(34,211,238,0.35),rgba(124,58,237,0.35));-webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);-webkit-mask-composite:xor;mask-composite:exclude;opacity:.4}
.card::after{content:"";pointer-events:none;position:absolute;inset:0;border-radius:inherit;background:linear-gradient(120deg,transparent 0%,transparent 40%,rgba(255,255,255,0.25) 50%,transparent 60%,transparent 100%);background-size:200% 100%;transform:translateZ(0);opacity:.0}
.card:hover::after{animation:shimmer 1.2s ease forwards;opacity:1}
.grid{display:grid;gap:20px}
.grid-2{grid-template-columns:repeat(2,minmax(0,1fr))}
.grid-3{grid-template-columns:repeat(3,minmax(0,1fr))}
.btn{position:relative;overflow:hidden;display:inline-flex;align-items:center;gap:8px;background:linear-gradient(180deg,var(--primary),var(--primary-600));color:#fff;border:none;border-radius:12px;padding:10px 14px;cursor:pointer;box-shadow:0 10px 22px rgba(245,158,11,0.35), 0 0 0 1px rgba(255,255,255,0.06) inset;transition:transform .12s ease, box-shadow .12s ease;text-shadow:0 1px 2px rgba(0,0,0,0.35)}
.btn::after{content:"";position:absolute;inset:auto;left:50%;top:50%;width:0;height:0;background:radial-gradient(closest-side,rgba(255,255,255,.45),transparent);transform:translate(-50%,-50%);transition:width .25s ease,height .25s ease;opacity:.75}
.btn:active::after{width:180%;height:180%}
.btn:hover{transform:translateY(-1px);box-shadow:0 10px 20px rgba(245,158,11,0.35)}
.btn.secondary{background:linear-gradient(180deg,#3b4758,#1f2937);color:#e7edf5;text-shadow:0 1px 2px rgba(0,0,0,0.45)}
.btn.ghost{background:rgba(255,255,255,0.08);border:1px solid var(--stroke);color:#ffffff}
.btn.danger{background:linear-gradient(180deg,#ef4444,#dc2626)}
.btn.accent{background:linear-gradient(180deg,var(--accent),#5b21b6);box-shadow:0 12px 22px rgba(124,58,237,0.35)}
.input,select{border:1px solid #cbd5e1;border-radius:10px;padding:10px 12px;outline:none;transition:border-color .12s ease, box-shadow .12s ease}
.input:focus,select:focus{border-color:var(--primary);box-shadow:0 0 0 3px var(--ring)}
.input{min-width:90px}
.card h2{margin:0 0 10px 0;font-size:20px}
.card h3{margin:4px 0 8px 0}
.option{cursor:pointer; backdrop-filter: blur(4px)}
.option:hover{box-shadow:0 0 0 2px rgba(34,211,238,0.25) inset, 0 6px 14px rgba(2,8,23,0.35)}
.option.selected{border-color:#22d3ee;box-shadow:0 0 0 2px rgba(34,211,238,0.6) inset, 0 0 0 4px rgba(34,211,238,0.2);transform:translateY(-1px)}
.option input{accent-color:var(--primary)}
.chip-row{display:flex;flex-wrap:wrap;gap:8px}
.chip{display:inline-flex;align-items:center;gap:6px;border:1px solid #cbd5e1;border-radius:999px;padding:6px 10px;background:#fff}
.chip input{accent-color:var(--primary)}
.kbd{border:1px solid #cbd5e1;border-radius:6px;padding:2px 6px;background:#f8fafc}
.badge{font-size:12px;background:rgba(255,255,255,0.08);border:1px solid var(--stroke);border-radius:999px;padding:4px 10px;color:#dbe5f2;backdrop-filter: blur(6px)}
.badge.amber{background:#fffbeb;border-color:#fde68a;color:#92400e}
.badge.teal{background:#ecfeff;border-color:#a5f3fc;color:#115e59}
.badge.purple{background:#f5f3ff;border-color:#ddd6fe;color:#5b21b6}
.navgrid{display:grid;grid-template-columns:repeat(10,1fr);gap:6px}
.navgrid button{aspect-ratio:1/1;border:1px solid var(--stroke);border-radius:8px;background:rgba(255,255,255,0.06);transition:transform .12s ease, box-shadow .12s ease; color:var(--text)}
.navgrid button:hover{transform:translateY(-1px)}
.navgrid button.answered{background:#0b2a1a;border-color:#1b5e2a}
.navgrid button.flagged{outline:2px solid #fbbf24; box-shadow:0 0 0 2px rgba(251,191,36,0.25)}
.navgrid button.current{outline:2px solid #22d3ee; box-shadow:0 0 0 4px rgba(34,211,238,0.2)}
.timer{font-variant-numeric:tabular-nums}
.timer.warn{color:#b45309}
.timer.danger{color:#b91c1c; animation:pulse 1s ease-in-out infinite}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.04)}100%{transform:scale(1)}}
hr{border:none;border-top:1px solid #e5e7eb;margin:12px 0}
@media (max-width:640px){.grid-3{grid-template-columns:1fr}.grid-2{grid-template-columns:1fr}.app-header nav a{padding:6px 8px}}

/* Ensure icons inherit contrast color */
.btn svg, .app-header svg, .badge svg, .card svg{fill:currentColor;stroke:currentColor;stroke-width:1.2}

/* Section spacing helpers (optional for templates that add class) */
.section{margin-top:8px}
.section + .section{margin-top:24px}

/* Subject tags (used in badges or chips) */
.tag{display:inline-flex;align-items:center;padding:4px 10px;border-radius:999px;font-size:12px;border:1px solid #e2e8f0;background:#fff;color:var(--text-soft)}
.tag.math{background:#fff7ed;border-color:#fed7aa;color:#9a3412}
.tag.physics{background:#ecfeff;border-color:#bae6fd;color:#0e7490}
.tag.chemistry{background:#f0fdf4;border-color:#bbf7d0;color:#166534}
.tag.biology{background:#fef2f2;border-color:#fecaca;color:#b91c1c}
.tag.reasoning{background:#f5f3ff;border-color:#ddd6fe;color:#5b21b6}

/* Alerts */
.alert{border:1px solid #e2e8f0;border-radius:12px;padding:10px 12px}
.alert.info{background:#eff6ff;border-color:#bfdbfe;color:#1e40af}
.alert.warn{background:#fffbeb;border-color:#fde68a;color:#92400e}
.alert.error{background:#fef2f2;border-color:#fecaca;color:#991b1b}

/* Skeleton loaders */
.skeleton{background:linear-gradient(90deg,#f3f4f6 25%,#edeef2 37%,#f3f4f6 63%);background-size:400% 100%;animation:shimmer 1.4s ease infinite;border-radius:8px}
.skeleton.text{height:12px}
.skeleton.title{height:18px}
.skeleton.avatar{width:36px;height:36px;border-radius:50%}

/* Reduced motion accessibility */
@media (prefers-reduced-motion: reduce){
  *{animation:none !important;transition:none !important}
}

/* Confetti animation */
@keyframes confettiFall{0%{transform:translateY(-10vh) rotate(0)}100%{transform:translateY(110vh) rotate(720deg)}}

/* Light theme override */
[data-theme="light"]{
  --text:#0f172a;--text-soft:#334155;--surface:#ffffff;--glass:rgba(255,255,255,0.65);--stroke:rgba(2,8,23,0.08);
  --shadow:0 10px 25px rgba(2,8,23,0.12);
}
[data-theme="light"] html,[data-theme="light"] body{background:linear-gradient(120deg,#fafafc,#eef2ff,#fff7ed);color:var(--text)}
[data-theme="light"] .app-header{background:linear-gradient(90deg, rgba(34,211,238,0.08), rgba(124,58,237,0.08));}
[data-theme="light"] .btn.ghost{background:#eef2f7;color:#0f172a}
[data-theme="light"] .badge{background:#f8fafc;color:#475569;border-color:#e2e8f0}
[data-theme="light"] .navgrid button{background:#fff;border-color:#e2e8f0;color:#0f172a}
